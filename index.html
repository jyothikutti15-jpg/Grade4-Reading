<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>üìö Grade 4 Reading Adventure!</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;600;700&family=Baloo+2:wght@600;700;800&family=Caveat:wght@600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
--bg1:#0f0c29;--bg2:#302b63;--bg3:#24243e;
--gold:#f1c40f;--peach:#fdcb6e;--mint:#55efc4;--coral:#fab1a0;--lav:#a29bfe;--sky:#74b9ff;--rose:#fd79a8;--leaf:#00b894;
--text:#ffecd2;--textsub:rgba(255,236,210,.5);
--glass:rgba(255,255,255,.06);--gborder:rgba(255,255,255,.1);
--fd:'Baloo 2',cursive;--fb:'Quicksand',sans-serif;--fc:'Caveat',cursive;
}
html,body{width:100%;height:100%;overflow:hidden;font-family:var(--fb);background:var(--bg1);color:var(--text)}
.bg{position:fixed;inset:0;z-index:0;background:linear-gradient(160deg,#0f0c29,#302b63 50%,#24243e)}
.bg::before{content:'';position:absolute;inset:0;background-image:
radial-gradient(2px 2px at 50px 50px,rgba(255,255,255,.3),transparent),
radial-gradient(1.5px 1.5px at 150px 40px,rgba(255,255,255,.2),transparent),
radial-gradient(1px 1px at 250px 80px,rgba(255,255,255,.4),transparent),
radial-gradient(2px 2px at 350px 30px,rgba(255,255,255,.2),transparent);
background-repeat:repeat;background-size:400px 100px;animation:twinkle 4s ease-in-out infinite alternate}
@keyframes twinkle{0%{opacity:.4}100%{opacity:.8}}
.app{position:relative;z-index:10;width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}
.hdr{display:flex;align-items:center;justify-content:space-between;padding:8px 14px;background:rgba(15,12,41,.9);backdrop-filter:blur(12px);border-bottom:1px solid rgba(241,196,15,.12);flex-shrink:0}
.hdr-t{font-family:var(--fd);font-size:1.1rem;background:linear-gradient(135deg,var(--peach),var(--gold),var(--mint));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hdr-r{display:flex;align-items:center;gap:6px}
.score-box{display:flex;align-items:center;gap:3px;background:rgba(241,196,15,.1);border:1.5px solid rgba(241,196,15,.3);border-radius:14px;padding:2px 10px;font-family:var(--fd);color:var(--gold);font-size:.8rem}
.q-badge{font-family:var(--fd);font-size:.62rem;padding:2px 8px;border-radius:10px;background:var(--mint);color:#111}

/* Screens */
.scr{flex:1;display:flex;flex-direction:column;overflow:hidden}.scr.off{display:none}

/* Menu */
.menu{align-items:center;padding:16px;gap:10px;overflow-y:auto}
.hero-icon{font-size:4rem;animation:bounce 2.5s ease-in-out infinite;filter:drop-shadow(0 0 20px rgba(241,196,15,.4))}
@keyframes bounce{0%,100%{transform:translateY(0) rotate(-2deg)}50%{transform:translateY(-10px) rotate(2deg)}}
.main-title{font-family:var(--fd);font-size:2rem;text-align:center;background:linear-gradient(135deg,var(--peach),var(--gold),var(--mint),var(--lav));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.sub-title{color:var(--textsub);font-weight:700;font-size:.82rem;margin-bottom:10px;text-align:center}
.story-grid{display:flex;flex-direction:column;gap:10px;width:100%;max-width:420px}
.story-card{background:var(--glass);border:2px solid var(--gborder);border-radius:16px;padding:12px 14px;cursor:pointer;transition:.3s;display:flex;align-items:center;gap:12px;position:relative;overflow:hidden}
.story-card::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,transparent 70%,rgba(255,255,255,.03))}
.story-card:active{transform:scale(.97);border-color:var(--gold);box-shadow:0 0 20px rgba(241,196,15,.15)}
.sc-icon{font-size:2.2rem;flex-shrink:0;filter:drop-shadow(0 2px 6px rgba(0,0,0,.3))}
.sc-info{flex:1}.sc-title{font-family:var(--fd);font-size:.92rem;line-height:1.2}.sc-desc{color:var(--textsub);font-size:.68rem;font-weight:600;margin-top:2px}
.sc-tag{position:absolute;top:8px;right:10px;font-size:.55rem;font-family:var(--fd);padding:2px 7px;border-radius:8px;color:#111}
.sc-tag.new{background:var(--mint)}.sc-tag.read{background:rgba(255,255,255,.15);color:var(--textsub)}

/* Reader */
.reader{display:flex;flex-direction:column;overflow:hidden}
.reader-top{display:flex;align-items:center;gap:8px;padding:6px 10px;background:rgba(15,12,41,.85);border-bottom:1px solid rgba(255,255,255,.05);flex-shrink:0}
.back-btn{background:var(--glass);border:2px solid var(--gborder);color:var(--text);border-radius:50%;width:34px;height:34px;font-size:.9rem;cursor:pointer;display:flex;align-items:center;justify-content:center}
.back-btn:active{transform:scale(.9)}
.reader-title{font-family:var(--fd);font-size:.85rem;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.spk-btn{background:none;border:none;font-size:1.2rem;cursor:pointer;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
.prog-bar{height:4px;background:rgba(255,255,255,.06);flex-shrink:0}
.prog-fill{height:100%;background:linear-gradient(90deg,var(--mint),var(--gold));transition:width .5s;border-radius:0 2px 2px 0}

.reader-body{flex:1;overflow-y:auto;padding:0}

/* Story content */
.story-content{max-width:480px;margin:0 auto;padding:14px 18px 30px}
.ch-scene{width:100%;border-radius:16px;overflow:hidden;margin:12px 0;position:relative;box-shadow:0 4px 20px rgba(0,0,0,.4);border:2px solid rgba(255,255,255,.08)}
.ch-scene svg{width:100%;display:block}
.ch-heading{font-family:var(--fd);font-size:1.15rem;color:var(--peach);margin:18px 0 8px;padding-left:4px;border-left:3px solid var(--gold);padding:2px 0 2px 10px}
.ch-heading:first-of-type{margin-top:8px}
.story-para{font-size:.88rem;line-height:1.85;font-weight:600;color:rgba(255,236,210,.82);margin-bottom:14px;text-align:left}
.story-para .em{color:var(--peach);font-weight:700}
.story-para .dialog{color:var(--mint);font-style:italic}
.inline-img{display:flex;justify-content:center;margin:10px 0;gap:6px;font-size:2rem;filter:drop-shadow(0 2px 8px rgba(0,0,0,.3))}
.fact-box{background:rgba(241,196,15,.06);border:2px solid rgba(241,196,15,.15);border-radius:12px;padding:10px 14px;margin:12px 0;font-size:.82rem;line-height:1.6;font-weight:600}
.fact-box .fact-title{font-family:var(--fd);color:var(--gold);font-size:.85rem;margin-bottom:4px}
.vocab-box{background:rgba(162,155,254,.08);border:2px solid rgba(162,155,254,.15);border-radius:12px;padding:10px 14px;margin:12px 0;font-size:.8rem;line-height:1.5;font-weight:600}
.vocab-box .vb-title{font-family:var(--fd);color:var(--lav);font-size:.82rem;margin-bottom:4px}

/* Questions */
.q-section{max-width:480px;margin:0 auto;padding:0 18px 30px}
.q-divider{text-align:center;margin:16px 0;font-family:var(--fd);font-size:1.1rem;color:var(--gold)}
.q-card{background:var(--glass);border:2px solid var(--gborder);border-radius:16px;padding:14px;margin-bottom:14px;animation:fadeUp .4s both}
.q-num{font-family:var(--fd);font-size:.7rem;color:var(--mint);margin-bottom:4px}
.q-text{font-weight:700;font-size:.88rem;margin-bottom:10px;line-height:1.5}
.q-opts{display:flex;flex-direction:column;gap:6px}
.q-opt{padding:10px 14px;border-radius:12px;border:2.5px solid var(--gborder);background:rgba(255,255,255,.03);font-weight:700;font-size:.82rem;cursor:pointer;transition:.3s;line-height:1.3}
.q-opt:active{transform:scale(.97);border-color:var(--gold)}
.q-opt.correct{background:rgba(85,239,196,.15)!important;border-color:var(--mint)!important;animation:pop .4s}
.q-opt.wrong{background:rgba(250,177,160,.12)!important;border-color:var(--coral)!important;animation:shake .5s}
.q-opt.locked{pointer-events:none;opacity:.45}
.q-opt.revealed{border-color:var(--mint);opacity:1!important;background:rgba(85,239,196,.08)!important}
.q-explain{margin-top:8px;font-size:.78rem;color:var(--textsub);font-weight:600;line-height:1.4;display:none;padding:8px;background:rgba(255,255,255,.03);border-radius:8px}
.q-explain.show{display:block;animation:fadeUp .3s}
@keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
@keyframes pop{0%{transform:scale(1.06)}100%{transform:scale(1)}}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-4px)}75%{transform:translateX(4px)}}

/* Results */
.results{text-align:center;padding:20px;animation:fadeUp .4s}
.res-emoji{font-size:3.5rem;animation:pop .6s}
.res-title{font-family:var(--fd);font-size:1.4rem;margin:8px 0;background:linear-gradient(135deg,var(--gold),var(--peach));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.res-score{font-family:var(--fd);color:var(--mint);font-size:1.1rem;margin-bottom:4px}
.res-sub{color:var(--textsub);font-weight:700;font-size:.8rem;margin-bottom:18px}
.res-btns{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
.rbtn{border:none;border-radius:20px;padding:11px 20px;font-family:var(--fd);font-size:.85rem;cursor:pointer;transition:.3s;display:flex;align-items:center;gap:5px}
.rbtn:active{transform:scale(.93)}
.rbtn-home{background:var(--glass);border:2px solid rgba(255,255,255,.2);color:var(--text)}
.rbtn-replay{background:linear-gradient(135deg,var(--lav),#6c5ce7);color:white;box-shadow:0 4px 15px rgba(108,92,231,.3)}
.rbtn-next{background:linear-gradient(135deg,var(--mint),var(--leaf));color:#111;box-shadow:0 4px 15px rgba(85,239,196,.3)}

.conf{position:fixed;z-index:1001;pointer-events:none;animation:confD 2.5s ease-out forwards}
@keyframes confD{0%{transform:translateY(-80px) rotate(0);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}

.mascot{font-size:2rem;position:fixed;bottom:10px;right:10px;z-index:50;animation:mF 3s ease-in-out infinite;cursor:pointer;filter:drop-shadow(0 0 8px rgba(241,196,15,.3))}
@keyframes mF{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}

@media(max-width:360px){.story-para{font-size:.82rem}.main-title{font-size:1.6rem}.ch-heading{font-size:1rem}}
</style>
</head>
<body>
<div class="bg"></div>
<div class="app">
<div class="hdr">
<div class="hdr-t">üìö Reading Adventure</div>
<div class="hdr-r"><div class="q-badge" id="qBadge">Q 0/10</div><div class="score-box">‚≠ê<span id="scTxt">0</span></div></div>
</div>

<div class="scr menu" id="menuScr">
<div class="hero-icon">üìñ</div>
<div class="main-title">Reading Comprehension</div>
<div class="sub-title">Grade 4 ‚Ä¢ Choose a story to read!</div>
<div class="story-grid" id="storyGrid"></div>
</div>

<div class="scr reader off" id="readerScr">
<div class="reader-top">
<button class="back-btn" onclick="goMenu()">‚Üê</button>
<div class="reader-title" id="rTitle">Story</div>
<button class="spk-btn" onclick="toggleNarrate()">üîä</button>
</div>
<div class="prog-bar"><div class="prog-fill" id="progFill" style="width:0%"></div></div>
<div class="reader-body" id="readerBody"></div>
</div>

<div class="mascot" id="mascot" onclick="toggleNarrate()">ü¶â</div>
</div>

<script>
// ===== AUDIO =====
const AC=window.AudioContext||window.webkitAudioContext;let ac;
function iAC(){if(!ac)ac=new AC();if(ac.state==='suspended')ac.resume()}
function tone(f,d,y='sine',v=.1){iAC();const o=ac.createOscillator(),g=ac.createGain();o.type=y;o.frequency.setValueAtTime(f,ac.currentTime);g.gain.setValueAtTime(v,ac.currentTime);g.gain.exponentialRampToValueAtTime(.001,ac.currentTime+d);o.connect(g);g.connect(ac.destination);o.start();o.stop(ac.currentTime+d)}
function sfxTap(){tone(500,.08);setTimeout(()=>tone(700,.06),35)}
function sfxOk(){tone(523,.12);setTimeout(()=>tone(659,.12),80);setTimeout(()=>tone(784,.15),160)}
function sfxNo(){tone(300,.18,'sawtooth',.07);setTimeout(()=>tone(250,.22,'sawtooth',.07),120)}
function sfxWin(){[523,587,659,784,880,1047].forEach((n,i)=>setTimeout(()=>tone(n,.16),i*65))}
// ===== SPEECH =====
function say(tx){if(!('speechSynthesis'in window))return;speechSynthesis.cancel();const u=new SpeechSynthesisUtterance(tx);u.rate=.88;u.pitch=1.05;u.volume=1;speechSynthesis.speak(u)}
function stopSay(){if('speechSynthesis'in window)speechSynthesis.cancel()}
let narrating=false;
function toggleNarrate(){narrating=!narrating;if(narrating){narrateStory()}else{stopSay()}}
function narrateStory(){
  const paras=document.querySelectorAll('.story-para');
  if(!paras.length)return;
  let txt='';paras.forEach(p=>txt+=p.textContent+'. ');
  say(txt);
}
if('speechSynthesis'in window){speechSynthesis.getVoices();speechSynthesis.onvoiceschanged=()=>speechSynthesis.getVoices()}

// ===== HELPERS =====
const R=n=>Math.floor(Math.random()*n);
const sh=a=>{const b=[...a];for(let i=b.length-1;i>0;i--){const j=R(i+1);[b[i],b[j]]=[b[j],b[i]]}return b};

// ===== STATE =====
let score=0,curStory=null,answered=0,correct=0,usedStories=new Set();

function show(id){document.querySelectorAll('.scr').forEach(s=>s.classList.add('off'));document.getElementById(id).classList.remove('off')}
function goMenu(){show('menuScr');stopSay();narrating=false;buildGrid()}

// ===== SVG SCENE GENERATORS =====
function svgScene(type){
const scenes={
forest:`<svg viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg">
<defs><linearGradient id="sky1" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#1a1a3e"/><stop offset="100%" stop-color="#2d5f2d"/></linearGradient></defs>
<rect width="400" height="180" fill="url(#sky1)"/>
<circle cx="350" cy="35" r="22" fill="#f1c40f" opacity=".9"/>
<circle cx="340" cy="30" r="3" fill="#f1c40f" opacity=".4"/><circle cx="360" cy="25" r="2" fill="#f1c40f" opacity=".3"/>
<polygon points="60,180 90,60 120,180" fill="#1a6b1a"/><polygon points="75,180 90,80 105,180" fill="#228B22"/>
<polygon points="150,180 180,50 210,180" fill="#1a6b1a"/><polygon points="165,180 180,70 195,180" fill="#2d8b2d"/>
<polygon points="250,180 285,45 320,180" fill="#1a6b1a"/><polygon points="268,180 285,65 302,180" fill="#228B22"/>
<polygon points="340,180 360,80 380,180" fill="#1a6b1a"/>
<rect x="85" y="140" width="10" height="40" fill="#5c3a1e"/><rect x="175" y="130" width="10" height="50" fill="#5c3a1e"/>
<rect x="280" y="125" width="10" height="55" fill="#5c3a1e"/><rect x="355" y="140" width="10" height="40" fill="#5c3a1e"/>
<ellipse cx="200" cy="175" rx="200" ry="12" fill="#1a4a1a"/>
<circle cx="100" cy="155" r="3" fill="#f1c40f" opacity=".6"/><circle cx="220" cy="145" r="2" fill="#f1c40f" opacity=".5"/>
<circle cx="310" cy="160" r="3" fill="#f1c40f" opacity=".4"/><circle cx="50" cy="140" r="2" fill="#f1c40f" opacity=".5"/>
</svg>`,
ocean:`<svg viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg">
<defs><linearGradient id="oc" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#0077be"/><stop offset="100%" stop-color="#001a33"/></linearGradient></defs>
<rect width="400" height="180" fill="url(#oc)"/>
<circle cx="60" cy="30" r="18" fill="#f1c40f" opacity=".8"/>
<path d="M0,80 Q50,65 100,80 Q150,95 200,80 Q250,65 300,80 Q350,95 400,80 V180 H0Z" fill="#005a99" opacity=".5"/>
<path d="M0,100 Q60,88 120,100 Q180,112 240,100 Q300,88 360,100 Q390,108 400,105 V180 H0Z" fill="#003d66" opacity=".6"/>
<ellipse cx="300" cy="130" rx="20" ry="12" fill="#ff6b6b" opacity=".5"/><ellipse cx="310" cy="128" rx="14" ry="8" fill="#ff8787" opacity=".4"/>
<path d="M150,120 Q155,105 160,120" stroke="#55efc4" fill="none" stroke-width="2"/>
<path d="M153,120 L157,135 L147,125 L163,125 L150,135Z" fill="#55efc4" opacity=".6"/>
<circle cx="80" cy="150" r="15" fill="#fdcb6e" opacity=".2"/><circle cx="80" cy="150" r="10" fill="#fdcb6e" opacity=".15"/>
<ellipse cx="200" cy="160" rx="30" ry="8" fill="#00b894" opacity=".3"/>
<path d="M190,160 Q195,145 200,160" stroke="#00b894" fill="none" stroke-width="2" opacity=".5"/>
<path d="M205,158 Q210,143 215,158" stroke="#00b894" fill="none" stroke-width="2" opacity=".4"/>
</svg>`,
space:`<svg viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg">
<rect width="400" height="180" fill="#0a0a2a"/>
<circle cx="50" cy="30" r="1.5" fill="white" opacity=".8"/><circle cx="120" cy="50" r="1" fill="white" opacity=".6"/>
<circle cx="200" cy="20" r="2" fill="white" opacity=".7"/><circle cx="280" cy="45" r="1" fill="white" opacity=".5"/>
<circle cx="350" cy="25" r="1.5" fill="white" opacity=".9"/><circle cx="30" cy="80" r="1" fill="white" opacity=".4"/>
<circle cx="170" cy="70" r="1.5" fill="white" opacity=".6"/><circle cx="380" cy="90" r="1" fill="white" opacity=".7"/>
<circle cx="300" cy="100" r="30" fill="#4a69bd"/><circle cx="290" cy="92" r="8" fill="#3c5aa6" opacity=".6"/>
<circle cx="315" cy="108" r="5" fill="#3c5aa6" opacity=".5"/><circle cx="305" cy="95" r="3" fill="#6a89cc" opacity=".4"/>
<ellipse cx="300" cy="100" rx="42" ry="6" fill="none" stroke="#a29bfe" stroke-width="2" opacity=".4" transform="rotate(-20,300,100)"/>
<path d="M80,130 L90,100 L100,130 L85,110 L105,110Z" fill="#f1c40f" opacity=".7"/>
<circle cx="150" cy="140" r="12" fill="#e17055"/><circle cx="146" cy="136" r="4" fill="#d63031" opacity=".5"/>
</svg>`,
mountain:`<svg viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg">
<defs><linearGradient id="ms" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#ff7675"/><stop offset="60%" stop-color="#fdcb6e"/><stop offset="100%" stop-color="#2d3436"/></linearGradient></defs>
<rect width="400" height="180" fill="url(#ms)"/>
<circle cx="320" cy="45" r="20" fill="#f1c40f" opacity=".8"/>
<polygon points="0,180 80,60 160,180" fill="#2d3436"/><polygon points="60,180 80,70 100,180" fill="#636e72"/>
<polygon points="120,180 200,40 280,180" fill="#2d3436"/><polygon points="160,180 200,55 240,180" fill="#636e72"/>
<polygon points="250,180 340,50 400,180" fill="#2d3436"/><polygon points="290,180 340,65 370,180" fill="#636e72"/>
<polygon points="70,65 80,60 90,65" fill="white" opacity=".8"/>
<polygon points="185,48 200,40 215,48" fill="white" opacity=".8"/>
<polygon points="325,58 340,50 355,58" fill="white" opacity=".8"/>
<path d="M20,130 Q30,125 40,130" stroke="white" fill="none" stroke-width="1" opacity=".3"/>
<path d="M250,110 Q270,105 290,110" stroke="white" fill="none" stroke-width="1" opacity=".3"/>
</svg>`,
city:`<svg viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg">
<rect width="400" height="180" fill="#1a1a3e"/>
<circle cx="350" cy="30" r="15" fill="#f1c40f" opacity=".7"/>
<rect x="20" y="80" width="40" height="100" fill="#2c3e50"/><rect x="25" y="90" width="8" height="8" fill="#f1c40f" opacity=".6"/><rect x="37" y="90" width="8" height="8" fill="#74b9ff" opacity=".5"/><rect x="25" y="105" width="8" height="8" fill="#74b9ff" opacity=".4"/><rect x="37" y="105" width="8" height="8" fill="#f1c40f" opacity=".6"/>
<rect x="70" y="50" width="50" height="130" fill="#34495e"/><rect x="78" y="58" width="8" height="8" fill="#f1c40f" opacity=".5"/><rect x="93" y="58" width="8" height="8" fill="#74b9ff" opacity=".6"/><rect x="78" y="73" width="8" height="8" fill="#74b9ff" opacity=".4"/><rect x="93" y="73" width="8" height="8" fill="#f1c40f" opacity=".5"/><rect x="78" y="88" width="8" height="8" fill="#f1c40f" opacity=".6"/><rect x="93" y="88" width="8" height="8" fill="#74b9ff" opacity=".3"/>
<rect x="140" y="70" width="45" height="110" fill="#2c3e50"/><rect x="148" y="78" width="7" height="7" fill="#f1c40f" opacity=".5"/><rect x="160" y="78" width="7" height="7" fill="#74b9ff" opacity=".5"/><rect x="148" y="92" width="7" height="7" fill="#74b9ff" opacity=".4"/><rect x="160" y="92" width="7" height="7" fill="#f1c40f" opacity=".6"/>
<rect x="200" y="40" width="55" height="140" fill="#34495e"/><rect x="208" y="48" width="8" height="8" fill="#74b9ff" opacity=".5"/><rect x="222" y="48" width="8" height="8" fill="#f1c40f" opacity=".6"/><rect x="236" y="48" width="8" height="8" fill="#74b9ff" opacity=".4"/><rect x="208" y="63" width="8" height="8" fill="#f1c40f" opacity=".5"/><rect x="222" y="63" width="8" height="8" fill="#74b9ff" opacity=".6"/><rect x="236" y="63" width="8" height="8" fill="#f1c40f" opacity=".4"/>
<rect x="270" y="60" width="40" height="120" fill="#2c3e50"/><rect x="278" y="68" width="7" height="7" fill="#f1c40f" opacity=".5"/><rect x="290" y="68" width="7" height="7" fill="#74b9ff" opacity=".6"/>
<rect x="330" y="90" width="50" height="90" fill="#34495e"/><rect x="338" y="98" width="8" height="8" fill="#74b9ff" opacity=".5"/><rect x="352" y="98" width="8" height="8" fill="#f1c40f" opacity=".6"/><rect x="338" y="113" width="8" height="8" fill="#f1c40f" opacity=".4"/><rect x="352" y="113" width="8" height="8" fill="#74b9ff" opacity=".5"/>
</svg>`,
farm:`<svg viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg">
<defs><linearGradient id="fs" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#74b9ff"/><stop offset="100%" stop-color="#55efc4"/></linearGradient></defs>
<rect width="400" height="180" fill="url(#fs)"/>
<circle cx="320" cy="40" r="25" fill="#f1c40f" opacity=".9"/>
<ellipse cx="100" cy="50" rx="50" ry="20" fill="white" opacity=".6"/><ellipse cx="120" cy="45" rx="30" ry="15" fill="white" opacity=".5"/>
<rect x="0" y="120" width="400" height="60" fill="#27ae60"/>
<rect x="50" y="85" width="60" height="50" fill="#e74c3c"/><polygon points="40,85 110,85 80,60" fill="#c0392b"/>
<rect x="70" y="105" width="15" height="30" fill="#5c3a1e"/>
<rect x="55" y="95" width="12" height="10" fill="#74b9ff" opacity=".7"/><rect x="85" y="95" width="12" height="10" fill="#74b9ff" opacity=".7"/>
<rect x="200" y="100" width="40" height="35" fill="#8B4513"/><polygon points="195,100 240,100 220,82" fill="#A0522D"/>
<line x1="280" y1="120" x2="280" y2="100" stroke="#5c3a1e" stroke-width="3"/><circle cx="280" cy="95" r="10" fill="#27ae60"/>
<line x1="310" y1="120" x2="310" y2="105" stroke="#5c3a1e" stroke-width="3"/><circle cx="310" cy="100" r="8" fill="#2ecc71"/>
<line x1="340" y1="120" x2="340" y2="95" stroke="#5c3a1e" stroke-width="3"/><circle cx="340" cy="90" r="11" fill="#27ae60"/>
<line x1="370" y1="120" x2="370" y2="102" stroke="#5c3a1e" stroke-width="3"/><circle cx="370" cy="97" r="9" fill="#2ecc71"/>
<rect x="130" y="140" width="140" height="3" fill="#5c3a1e" opacity=".3"/>
</svg>`,
desert:`<svg viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg">
<defs><linearGradient id="ds" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#fdcb6e"/><stop offset="100%" stop-color="#e17055"/></linearGradient></defs>
<rect width="400" height="180" fill="url(#ds)"/>
<circle cx="330" cy="35" r="28" fill="#f1c40f"/>
<path d="M0,140 Q100,110 200,130 Q300,150 400,125 V180 H0Z" fill="#d4a039"/>
<path d="M0,150 Q80,135 160,145 Q240,155 320,140 Q370,135 400,140 V180 H0Z" fill="#c8960a" opacity=".5"/>
<line x1="100" y1="140" x2="100" y2="90" stroke="#2d5016" stroke-width="4"/>
<ellipse cx="100" cy="95" rx="3" ry="15" fill="#27ae60" transform="rotate(-30,100,95)"/>
<ellipse cx="100" cy="95" rx="3" ry="15" fill="#27ae60" transform="rotate(30,100,95)"/>
<ellipse cx="100" cy="90" rx="3" ry="12" fill="#2ecc71" transform="rotate(-60,100,90)"/>
<ellipse cx="100" cy="90" rx="3" ry="12" fill="#2ecc71" transform="rotate(60,100,90)"/>
<line x1="280" y1="135" x2="280" y2="100" stroke="#2d5016" stroke-width="3"/>
<ellipse cx="280" cy="105" rx="2" ry="10" fill="#27ae60" transform="rotate(-25,280,105)"/>
<ellipse cx="280" cy="105" rx="2" ry="10" fill="#27ae60" transform="rotate(25,280,105)"/>
<polygon points="180,125 195,80 210,125" fill="#d4a039" opacity=".6"/>
<polygon points="220,130 240,70 260,130" fill="#c8960a" opacity=".5"/>
</svg>`,
arctic:`<svg viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg">
<defs><linearGradient id="as" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#a29bfe"/><stop offset="100%" stop-color="#dfe6e9"/></linearGradient></defs>
<rect width="400" height="180" fill="url(#as)"/>
<path d="M0,100 Q40,90 80,100 Q120,110 160,95 Q200,85 240,100 Q280,115 320,95 Q360,80 400,100 V180 H0Z" fill="white" opacity=".9"/>
<path d="M0,130 Q60,120 120,130 Q180,140 240,125 Q300,115 360,130 Q380,135 400,130 V180 H0Z" fill="#dfe6e9"/>
<polygon points="100,100 120,60 140,100" fill="white"/><polygon points="108,100 120,68 132,100" fill="#b2bec3"/>
<polygon points="250,95 275,45 300,95" fill="white"/><polygon points="260,95 275,55 290,95" fill="#b2bec3"/>
<circle cx="40" cy="75" r="3" fill="white" opacity=".6"/><circle cx="60" cy="65" r="2" fill="white" opacity=".4"/>
<circle cx="350" cy="70" r="3" fill="white" opacity=".5"/><circle cx="180" cy="80" r="2" fill="white" opacity=".6"/>
<path d="M160,130 Q165,122 170,130 Q175,138 180,130" stroke="#74b9ff" fill="none" stroke-width="1.5" opacity=".4"/>
</svg>`
};
return scenes[type]||scenes.forest;
}

// =========================================
// ===== THE 10 STORIES (100+ lines) =====
// =========================================
const STORIES=[
// ===== STORY 1 =====
{id:1,icon:'üê∫',title:'The Last Wolf of Shadow Valley',genre:'Adventure / Nature',scene:'forest',
chapters:[
{heading:'Chapter 1: The Howl',paras:[
'On the coldest night of winter, twelve-year-old <span class="em">Maya Chen</span> heard something that made her heart stop. A long, haunting howl echoed through Shadow Valley, bouncing off the frozen cliffs and fading into the starlit sky.',
'<span class="dialog">"Did you hear that?"</span> she whispered to her grandfather, who was sitting by the fireplace whittling a piece of cedar wood.',
'Grandfather set down his knife slowly. His weathered face, carved with lines from seventy years of mountain living, grew serious. <span class="dialog">"I haven\'t heard that sound in twenty years,"</span> he said quietly. <span class="dialog">"That\'s a gray wolf, Maya. And if I\'m not mistaken, it\'s calling for help."</span>',
'Maya pressed her face against the frosted window. The valley below was a sea of white, the pine trees bent under heavy snow like old men carrying too many books. The moon was enormous ‚Äî so bright it cast shadows across the snow.',
'Gray wolves had disappeared from Shadow Valley before Maya was born. Hunters and farmers had driven them away, saying they were dangerous. But Grandfather always told stories about the wolves ‚Äî how they were intelligent, family-oriented creatures that played a vital role in keeping the forest healthy.'
]},
{heading:'Chapter 2: Tracks in the Snow',paras:[
'The next morning, Maya bundled up in her warmest coat, pulled on her waterproof boots, and stepped outside. The air was so cold it stung her nostrils and made her eyes water. Every breath came out as a thick cloud of white vapor.',
'She found the tracks almost immediately ‚Äî large paw prints in the fresh snow, each one bigger than her fist. They led from the ridge above their cabin, wound between the pine trees, and continued toward the old logging road that nobody used anymore.',
'<span class="dialog">"Wolf prints, sure enough,"</span> said Grandfather, who had followed her outside. He knelt down carefully and examined them. <span class="dialog">"See how the front paws are larger than the back? And look ‚Äî the stride is uneven. This wolf is limping. It\'s injured."</span>',
'Maya felt a wave of concern wash over her. An injured wolf, alone in the dead of winter, with temperatures dropping below zero ‚Äî it wouldn\'t survive long without help.',
'<span class="dialog">"We have to find it,"</span> Maya said firmly.',
'Grandfather looked at her for a long moment, then nodded. <span class="dialog">"Get the first aid kit. And the thick blankets from the shed. We\'ll follow the tracks while the light is good."</span>'
]},
{heading:'Chapter 3: The Rescue',paras:[
'They followed the tracks for over two miles through dense forest. The trail led them past frozen creeks, through narrow ravines, and up a steep hillside that left them both breathing hard. Maya\'s legs ached, but she refused to stop.',
'Finally, they found her. In a shallow cave beneath a rock overhang, a beautiful gray wolf lay curled up, her golden eyes watching them with a mixture of fear and exhaustion. Her left front leg was caught in an old, rusted trap ‚Äî the kind that had been illegal for years.',
'<span class="dialog">"Easy, girl,"</span> Grandfather murmured, approaching slowly with his hands visible. <span class="dialog">"We\'re not going to hurt you."</span>',
'The wolf growled softly but didn\'t try to attack. It was as if she understood they were there to help. Maya noticed something else ‚Äî the wolf\'s belly was swollen. She was going to have pups.',
'Working together carefully, Grandfather pried open the rusty trap while Maya held the blanket ready. The wolf whimpered as the metal released her leg, then lay still, panting. Maya wrapped the injured leg with gauze and antiseptic from the first aid kit, just as Grandfather had taught her.',
'<span class="dialog">"She\'s dehydrated and malnourished,"</span> Grandfather said. <span class="dialog">"She\'s been trapped here for days. But she\'s strong. With food and rest, she\'ll heal."</span>',
'They left fresh water and some dried meat near the cave entrance and made the long trek back home. That night, Maya could barely sleep. She kept thinking about the wolf ‚Äî alone in the cold, but finally free.'
]},
{heading:'Chapter 4: A New Beginning',paras:[
'Over the following weeks, Maya and Grandfather visited the wolf every other day, bringing food and fresh water. They named her <span class="em">Luna</span> because of the way her eyes glowed silver in the moonlight. Slowly, Luna\'s leg healed. She began to trust them, even allowing Maya to sit just a few feet away while she ate.',
'Then, one April morning when the snow was finally melting and the first wildflowers were poking through the ground, Maya arrived at the cave to find the most wonderful sight of her life. Luna was lying on her side, and four tiny wolf pups were nursing ‚Äî their eyes still closed, their little bodies wriggling and squeaking.',
'Maya\'s eyes filled with tears of joy. <span class="dialog">"Grandfather, look,"</span> she whispered. <span class="dialog">"She\'s a mother."</span>',
'News of the wolves spread quickly through town. Some people were worried, but Maya wrote letters to the local newspaper and gave a presentation at the town meeting. She shared everything Grandfather had taught her about how wolves help forests ‚Äî how they keep deer populations balanced, which allows young trees to grow, which prevents erosion and helps rivers stay clear.',
'To everyone\'s surprise, the town voted to make Shadow Valley a protected wildlife area. Scientists from the state university came to study Luna and her pups. They fitted the wolves with tracking collars and monitored their progress.',
'By summer, Luna\'s pups ‚Äî now named Star, Shadow, Copper, and Brave ‚Äî were romping through the meadows, learning to hunt mice and chase butterflies. Luna would sit on the ridge above the cabin, watching over her family, occasionally lifting her head to howl at the moon.',
'Maya would stand at her window and howl back, and she could swear Luna\'s tail would wag.',
'<span class="dialog">"You know what you did, Maya?"</span> Grandfather said one evening as they watched the sunset paint the mountains gold and purple. <span class="dialog">"You didn\'t just save one wolf. You brought an entire species back to this valley. That\'s what happens when one person decides to care."</span>',
'Maya smiled and leaned against her grandfather\'s shoulder. Outside, five wolves ran through the wildflowers of Shadow Valley, free and alive, exactly where they belonged.'
]}
],
questions:[
{q:'Why did Maya want to find the wolf?',opts:['She wanted to capture it','It was injured and needed help','She wanted a pet','Her grandfather told her to'],ans:1,explain:'Maya felt concern because the wolf was limping in freezing temperatures and wouldn\'t survive without help.'},
{q:'How did Grandfather know the wolf was limping?',opts:['He saw the wolf','The howl sounded different','The stride in the tracks was uneven','Maya told him'],ans:2,explain:'Grandfather examined the paw prints and noticed the stride was uneven, indicating the wolf was injured.'},
{q:'The word "haunting" in Chapter 1 most likely means:',opts:['Scary and ghostly','Beautiful but eerie and unforgettable','Very loud','Happy and cheerful'],ans:1,explain:'"Haunting" describes something that is strikingly beautiful but also eerie ‚Äî it stays in your mind.'},
{q:'Why was the wolf especially vulnerable?',opts:['She was old','She was pregnant and trapped','She was a puppy','She was blind'],ans:1,explain:'The wolf was pregnant (going to have pups) AND caught in a trap, making her doubly vulnerable.'},
{q:'What is the MAIN THEME of this story?',opts:['Wolves are dangerous animals','One person\'s compassion can make a big difference','Winter is a difficult season','Old people know everything'],ans:1,explain:'The central theme is that one person\'s decision to care (Maya) led to saving not just one wolf but bringing wolves back to the entire valley.'},
{q:'What does "malnourished" mean?',opts:['Very cold','Not getting enough food/nutrition','Extremely tired','Very angry'],ans:1,explain:'Malnourished means not getting enough food or proper nutrition, which weakened Luna.'},
{q:'How did wolves help the forest, according to Maya\'s presentation?',opts:['They planted trees','They kept deer populations balanced, allowing trees to grow','They scared away hunters','They dug rivers'],ans:1,explain:'Maya explained how wolves control deer populations, which lets young trees grow, preventing erosion and keeping rivers clear ‚Äî a trophic cascade.'},
{q:'What can you INFER about Grandfather\'s feelings toward wolves?',opts:['He was afraid of them','He respected and admired them','He wanted to hunt them','He didn\'t care about them'],ans:1,explain:'Grandfather told positive stories about wolves, knew how to track them, and helped rescue Luna, showing deep respect and admiration.'},
{q:'The author compares pine trees to "old men carrying too many books" to show:',opts:['The trees were dying','How heavily the snow weighed on the branches','The trees were very old','There were books in the forest'],ans:1,explain:'This simile helps readers visualize how heavily the snow bent the tree branches ‚Äî like a person bent over carrying a heavy load.'},
{q:'What is the author\'s PURPOSE in writing this story?',opts:['To entertain and teach about wildlife conservation','To scare children about wolves','To explain how to set traps','To describe winter weather'],ans:0,explain:'The author uses an engaging story to entertain while teaching readers about the importance of wolves and wildlife conservation.'}
]},

// ===== STORY 2 =====
{id:2,icon:'üåä',title:'The Mystery of Coral Cove',genre:'Mystery / Science',scene:'ocean',
chapters:[
{heading:'Chapter 1: The Strange Discovery',paras:[
'<span class="em">Kai Nakamura</span> had spent every summer of his eleven years at Coral Cove, a small bay on the Hawaiian island of Maui. He knew every rock, every tide pool, every hiding spot where the octopuses liked to rest. The cove was his second home, his classroom, and his playground all rolled into one.',
'But this summer, something was terribly wrong.',
'The coral reef that had always been a dazzling underwater rainbow ‚Äî bright oranges, electric purples, vivid greens ‚Äî was turning white. Not just a little white. Huge patches of the reef looked like someone had poured bleach over an entire underwater city.',
'<span class="dialog">"It\'s called coral bleaching,"</span> explained Dr. Lani Torres, the marine biologist who had set up a research station at the cove. She was a tall woman with kind eyes and sun-weathered skin, and she always wore a shark tooth necklace. <span class="dialog">"When ocean water gets too warm, the coral gets stressed and expels the tiny algae that live inside it. Those algae are what give coral its beautiful colors ‚Äî and its food. Without them, the coral turns white and slowly starves."</span>',
'Kai stared at the pale reef through the glass-bottom boat and felt like crying. <span class="dialog">"Can we save it?"</span> he asked.'
]},
{heading:'Chapter 2: The Investigation',paras:[
'Dr. Torres handed Kai a waterproof notebook and a special underwater thermometer. <span class="dialog">"I need a research assistant,"</span> she said with a smile. <span class="dialog">"Someone who knows this reef better than anyone. Want the job?"</span>',
'Every morning for the next three weeks, Kai dove into the warm, crystal-clear water with his snorkel and mask. He recorded water temperatures at twelve different points around the cove. He sketched maps showing which parts of the reef were bleached, which were healthy, and which were somewhere in between. He counted fish species and noted how their numbers were changing.',
'The data told a disturbing story. Water temperatures had risen by almost two degrees compared to five years ago. Fish populations had dropped by thirty percent. Some species Kai had seen every summer ‚Äî like the yellow tang and the humuhumunukunukuapua\'a (Hawaii\'s state fish) ‚Äî were becoming harder to find.',
'<span class="dialog">"Two degrees doesn\'t sound like much,"</span> Kai said one evening, reviewing his charts with Dr. Torres.',
'<span class="dialog">"Think of it this way,"</span> she replied. <span class="dialog">"If your body temperature rises just two degrees, you have a fever and feel terrible. The ocean is the same. A small change can have enormous consequences."</span>',
'But Kai noticed something puzzling in his data. One small section of the reef ‚Äî near an underwater freshwater spring ‚Äî was still vibrantly colorful. The coral there seemed completely unaffected by the bleaching.'
]},
{heading:'Chapter 3: A Clue in the Water',paras:[
'<span class="dialog">"Dr. Torres, look at this!"</span> Kai pointed to his map excitedly. He had circled the healthy patch in green marker. <span class="dialog">"The coral near the spring is fine. Everything else is bleaching, but not here. Why?"</span>',
'Dr. Torres studied his data carefully, her eyebrows rising. <span class="dialog">"That\'s an excellent observation, Kai. The freshwater spring is slightly cooler than the surrounding ocean. It might be creating a microhabitat ‚Äî a small area with different conditions than its surroundings."</span>',
'Together, they took water samples and measured the temperature, salinity, and mineral content of the water near the spring. The results were remarkable. The spring water was three degrees cooler and contained trace minerals that seemed to help the coral resist stress.',
'<span class="dialog">"This could be incredibly important,"</span> Dr. Torres said, her voice trembling with excitement. <span class="dialog">"If we can understand why this coral is surviving, we might be able to help reefs around the world."</span>',
'Kai spent the rest of the summer helping Dr. Torres collect samples and document everything meticulously. He learned to use a microscope to examine coral polyps, the tiny animals that build the reef. Under magnification, each polyp looked like a miniature flower made of glass.'
]},
{heading:'Chapter 4: The Presentation',paras:[
'In September, Dr. Torres was invited to present their findings at a marine science conference in Honolulu. She insisted that Kai come along ‚Äî after all, he was the one who had made the key discovery.',
'Standing in front of two hundred scientists, professors, and environmentalists, Kai was terrified. His hands were shaking and his mouth felt dry. But then he thought about the reef ‚Äî about the beautiful coral that was dying, about the fish that were disappearing, about the underwater world that had given him so much joy.',
'He took a deep breath and began to speak. He showed his hand-drawn maps, his temperature charts, and photographs of the healthy coral near the spring. He explained his observations clearly and answered questions from the audience ‚Äî some of which came from scientists who had been studying reefs for decades.',
'When he finished, the audience erupted in applause. Several scientists approached him afterward, calling his work <span class="em">"remarkable for any researcher, let alone an eleven-year-old."</span>',
'The research made national news. A university in California partnered with Dr. Torres to study the freshwater spring in detail. A conservation group raised money to create a marine protected area around Coral Cove. And Kai\'s school invited him to start an ocean science club, which became the most popular club in the school within a month.',
'<span class="dialog">"You know what makes a great scientist, Kai?"</span> Dr. Torres asked him on their last day together that summer.',
'<span class="dialog">"Being smart?"</span> Kai guessed.',
'<span class="dialog">"Being curious,"</span> she corrected. <span class="dialog">"You noticed something everyone else overlooked because you paid attention and asked questions. Never stop doing that."</span>',
'As Kai dove into the clear water one final time that summer, he ran his fingers gently over the healthy coral near the spring. The tiny polyps waved like a thousand miniature hands, as if thanking him.',
'He knew then that the ocean would be his life\'s work. There were mysteries down here ‚Äî important ones ‚Äî and he was just getting started.'
]}
],
questions:[
{q:'What is coral bleaching?',opts:['Painting coral white','When coral expels its algae due to warm water and turns white','A type of fish disease','Coral growing too fast'],ans:1,explain:'Coral bleaching occurs when stressed coral expels the tiny algae living inside it, losing both its color and its food source.'},
{q:'Why was the coral near the freshwater spring healthy?',opts:['It was a different species','The cooler water and minerals helped it resist stress','Someone was feeding it','It was fake coral'],ans:1,explain:'The spring water was cooler and contained minerals that helped the coral resist the stress causing bleaching elsewhere.'},
{q:'The word "meticulously" means:',opts:['Quickly and carelessly','With great care and attention to detail','Loudly','Secretly'],ans:1,explain:'Meticulously means doing something with extreme care, precision, and attention to every detail.'},
{q:'Dr. Torres compared ocean warming to a human fever to:',opts:['Scare Kai','Show that even small temperature changes have big effects','Prove the ocean is alive','Change the subject'],ans:1,explain:'The comparison helped Kai understand that a "small" 2-degree rise can have enormous consequences, just like a slight fever makes you feel terrible.'},
{q:'What made Kai\'s discovery important?',opts:['He found buried treasure','The healthy coral could help scientists save reefs worldwide','He became famous','He won a prize'],ans:1,explain:'Understanding why that coral survived could provide clues to help protect dying reefs around the entire world.'},
{q:'What can you INFER about Kai\'s character?',opts:['He is lazy and distracted','He is observant, curious, and dedicated','He doesn\'t like the ocean','He only cares about grades'],ans:1,explain:'Kai spent weeks collecting data, noticed what others missed, and presented his findings confidently ‚Äî showing curiosity and dedication.'},
{q:'What is a "microhabitat"?',opts:['A very large ecosystem','A small area with different conditions than its surroundings','A type of fish','An underwater cave'],ans:1,explain:'A microhabitat is a small, localized area where environmental conditions differ from the surrounding area.'},
{q:'Why were fish populations declining?',opts:['Too many fishermen','The coral bleaching destroyed their habitat and food source','A shark ate them all','They migrated to another ocean'],ans:1,explain:'Fish depend on healthy coral reefs for food and shelter. As the reef died, fish lost their habitat and food sources.'},
{q:'The author\'s MAIN PURPOSE in this story is to:',opts:['Entertain while teaching about ocean conservation and scientific observation','Explain how to snorkel','Describe Hawaii as a tourist destination','Show that children shouldn\'t do science'],ans:0,explain:'The story entertains readers with Kai\'s adventure while teaching about coral bleaching, scientific methods, and ocean conservation.'},
{q:'When Dr. Torres says "Being curious" is most important, she means:',opts:['Scientists don\'t need to study','Asking questions and noticing details matters more than just intelligence','Being curious is dangerous','You should never study science'],ans:1,explain:'She emphasizes that curiosity ‚Äî paying attention and asking "why?" ‚Äî is the most fundamental quality of a great scientist.'}
]},

// ===== STORY 3 =====
{id:3,icon:'üöÄ',title:'The Girl Who Mapped the Stars',genre:'Science Fiction / Inspiration',scene:'space',
chapters:[
{heading:'Chapter 1: Dreams Beyond the Sky',paras:[
'In the small village of Nyota, nestled at the foot of Mount Kilimanjaro in Tanzania, twelve-year-old <span class="em">Amara Okafor</span> spent every clear night lying on the roof of her family\'s tin-roofed house, staring up at the sky. While other children played games after dinner, Amara counted stars.',
'Her grandmother, Bibi Rose, had taught her the constellations using the old stories ‚Äî how Orion the Hunter chased the seven sisters of the Pleiades across the sky, how the bright star Sirius was the guardian of the heavens, how the Milky Way was a river of light connecting the world of the living to the world of the ancestors.',
'<span class="dialog">"Each star is a story, Amara,"</span> Bibi Rose would say. <span class="dialog">"And some stories haven\'t been told yet. Those are waiting for someone brave enough to discover them."</span>',
'Amara didn\'t have a telescope or fancy equipment. She had a hand-drawn star chart that she updated every week, a notebook filled with observations, and an old pair of binoculars her father had found at a market. But she had something more valuable than any tool: an extraordinary memory for patterns and an unshakeable determination.',
'One Tuesday night in March, Amara noticed something that would change her life forever. A star she had been tracking for six months ‚Äî a medium-bright star in the constellation Centaurus ‚Äî had disappeared.'
]},
{heading:'Chapter 2: The Missing Star',paras:[
'Stars don\'t just vanish. Amara knew this from the astronomy books she borrowed from the school library. Stars can dim, flicker, move across the sky over centuries, or explode in spectacular supernovae. But they don\'t simply blink out of existence overnight.',
'She checked her charts obsessively for the next three nights. The star was definitely gone. In its place was... nothing. Just empty blackness where a pinpoint of light had shone for as long as Amara could remember.',
'<span class="dialog">"Maybe you made a mistake,"</span> her older brother Kwame suggested.',
'<span class="dialog">"I don\'t make mistakes about stars,"</span> Amara replied firmly. She showed him six months of meticulously drawn charts, each one showing the star\'s position relative to its neighbors. The evidence was undeniable.',
'Amara\'s science teacher, Mr. Mwangi, was intrigued but skeptical. He contacted a professor at the University of Dar es Salaam, who agreed to look at Amara\'s data. Two weeks later, the professor called Mr. Mwangi back, and his voice was trembling with excitement.',
'The star hadn\'t disappeared ‚Äî it had been <span class="em">eclipsed</span>. Something massive had passed in front of it, blocking its light. And based on Amara\'s precise observations, the professor believed that "something" was a previously undiscovered exoplanet ‚Äî a planet orbiting another star.'
]},
{heading:'Chapter 3: The World Takes Notice',paras:[
'The discovery set the astronomy community buzzing. Professional observatories in South Africa, Chile, and Hawaii pointed their powerful telescopes at the coordinates Amara had identified. They confirmed it: a gas giant planet, roughly the size of Jupiter, was orbiting the star in Centaurus.',
'International news organizations ran the story. <span class="em">"12-Year-Old Girl Discovers New Planet with Binoculars and a Notebook"</span> ‚Äî the headline appeared in newspapers and websites around the world.',
'Scientists were astonished not just by the discovery itself, but by the quality of Amara\'s observations. Her hand-drawn charts were so precise, so consistent, and so detailed that they rivaled data from electronic equipment costing thousands of dollars.',
'Amara was invited to the International Astronomy Conference in Geneva, Switzerland. An organization called the Planetary Society offered her a full scholarship to attend any school she wanted. The Tanzania Space Agency named her their youngest honorary member.',
'But the moment that meant the most to Amara came when the International Astronomical Union ‚Äî the organization that officially names celestial objects ‚Äî asked her what she wanted to call the new planet.',
'She didn\'t hesitate. <span class="dialog">"Bibi Rose,"</span> she said. <span class="dialog">"After my grandmother, who taught me to look up."</span>'
]},
{heading:'Chapter 4: Looking Up',paras:[
'The planet was officially catalogued as "Amara-1" in scientific databases, with the informal name "Bibi Rose" approved for public use. It was the first exoplanet discovered by a child, and the first discovered from sub-Saharan Africa without professional equipment.',
'At the Geneva conference, Amara gave a speech that received a standing ovation. She talked about how anyone, anywhere, with enough patience and curiosity, could contribute to scientific discovery. She talked about the importance of funding science education in developing countries. And she talked about her grandmother.',
'<span class="dialog">"Bibi Rose couldn\'t read or write,"</span> Amara told the audience of hundreds. <span class="dialog">"She never went to school. But she knew the sky better than any textbook. She taught me that knowledge doesn\'t always come from classrooms ‚Äî sometimes it comes from lying on a tin roof and paying attention to the universe."</span>',
'Today, Amara is studying astrophysics on a full scholarship. The old binoculars sit in a glass case in her dorm room. She has access to the world\'s most powerful telescopes now, but she still spends clear nights on the roof, notebook in hand, watching the stars.',
'And on those nights, she always looks toward Centaurus, where a giant planet named Bibi Rose orbits a distant star ‚Äî a planet that was found by a girl who simply refused to stop looking up.',
'Back in Nyota, the school now has a small observatory donated by the Planetary Society. Children gather there on Friday nights for "Star Club," where they learn to chart the sky just like Amara did. One wall of the observatory has a hand-painted mural of the night sky, and in the center, a bright dot labeled "Bibi Rose."',
'Bibi Rose herself, now ninety-three years old, sometimes comes to Star Club. She sits in a chair wrapped in a colorful kanga cloth, her eyes still sharp, and tells the children the old stories about the constellations.',
'<span class="dialog">"But Bibi,"</span> the children always ask, <span class="dialog">"what about the new stories? The ones that haven\'t been told yet?"</span>',
'And Bibi Rose always smiles and points up. <span class="dialog">"Those are waiting for you."</span>'
]}
],
questions:[
{q:'How did Amara discover the exoplanet?',opts:['Using a powerful telescope','She noticed a star she tracked had disappeared due to an eclipse','A scientist told her where to look','She read about it in a book'],ans:1,explain:'Amara noticed that a star she had been tracking for six months had disappeared ‚Äî it was actually eclipsed by a previously undiscovered planet passing in front of it.'},
{q:'Why were professional scientists astonished?',opts:['She was famous','Her hand-drawn charts rivaled expensive electronic equipment in accuracy','She had a telescope','She was from Europe'],ans:1,explain:'Scientists were amazed that her meticulously hand-drawn observations were as precise as data from equipment costing thousands of dollars.'},
{q:'The word "eclipsed" in this story means:',opts:['Destroyed','Blocked from view by something passing in front','Made brighter','Moved to a new position'],ans:1,explain:'An eclipse occurs when one celestial body passes in front of another, blocking its light from our perspective.'},
{q:'Why did Amara name the planet "Bibi Rose"?',opts:['It was the rules','To honor her grandmother who taught her to love the stars','The scientists chose it','It was a random name'],ans:1,explain:'Amara named the planet after her grandmother, who first taught her the constellations and inspired her love of astronomy.'},
{q:'What is the THEME of this story?',opts:['Only rich people can do science','Curiosity, patience, and determination can lead to extraordinary discoveries','Stars are boring','Africa has no scientists'],ans:1,explain:'The theme is that curiosity, patience, and dedication can lead to remarkable discoveries regardless of resources or background.'},
{q:'What does "meticulously" mean in this context?',opts:['Carelessly','With great precision and attention to detail','Quickly','Angrily'],ans:1,explain:'Meticulously means with extreme care and precision ‚Äî Amara\'s charts were detailed and consistent over six months.'},
{q:'Bibi Rose\'s quote "Those are waiting for you" means:',opts:['Stars are dangerous','There are undiscovered things waiting for curious people to find them','Children should go to bed early','Stars will fall to earth'],ans:1,explain:'Bibi Rose encourages children that there are still undiscovered wonders in the universe waiting for curious minds to find them.'},
{q:'What can you INFER about the importance of Amara\'s discovery for Africa?',opts:['Nothing changed','It showed that scientific discoveries can come from anywhere, not just wealthy countries','Africa doesn\'t need science','It made Tanzania rich'],ans:1,explain:'Her discovery demonstrated that important science can happen anywhere and highlighted the importance of funding science education globally.'},
{q:'The phrase "unshakeable determination" describes someone who:',opts:['Gives up easily','Refuses to quit no matter what','Is physically strong','Is very loud'],ans:1,explain:'Unshakeable determination means having a firm resolve that cannot be weakened ‚Äî Amara kept observing and recording even without expensive equipment.'},
{q:'What is the author\'s PURPOSE in mentioning Amara\'s simple tools (binoculars, notebook)?',opts:['To show she was poor','To emphasize that great discoveries depend on skill and dedication, not expensive equipment','To advertise binoculars','To make the story funny'],ans:1,explain:'By highlighting her simple tools, the author emphasizes that dedication, careful observation, and curiosity matter more than expensive technology.'}
]},

// ===== STORY 4 =====
{id:4,icon:'üèîÔ∏è',title:'The Highest Classroom',genre:'Adventure / Perseverance',scene:'mountain',
chapters:[
{heading:'Chapter 1: The Impossible School',paras:[
'In the remote Himalayan village of Tashi Delek, perched on a mountainside at 14,000 feet above sea level, there was no school. The nearest one was a seven-hour walk down the mountain and across a river that flooded dangerously every monsoon season. Most children in the village had never sat in a classroom.',
'Ten-year-old <span class="em">Tenzin Dorji</span> wanted to change that. He had learned to read from his mother, a former teacher who had moved to the village when she married his father. She taught Tenzin using whatever materials she could find ‚Äî old newspapers, rice sacks with printed labels, even the instructions on medicine packets.',
'<span class="dialog">"Knowledge is the one thing nobody can take from you,"</span> his mother told him every morning. <span class="dialog">"It weighs nothing, but it can move mountains."</span>',
'Tenzin believed her. And he had an idea ‚Äî a big idea, the kind that adults would call impossible. He wanted to build a school in Tashi Delek. Not someday in the distant future, but now.'
]},
{heading:'Chapter 2: Gathering Allies',paras:[
'Tenzin started by making a list of everything they\'d need: a building, books, a teacher, desks, and supplies. The list seemed overwhelming. The village had no money for any of it. Most families barely earned enough to feed themselves, surviving on potato farming and yak herding.',
'But Tenzin was resourceful. He went door to door in the village, speaking with every family. He learned that Mr. Dorje, the elderly yak herder, had been a mathematics teacher in Kathmandu before retiring to the mountains. Mrs. Pema, who ran the tiny tea shop, had boxes of old textbooks that her city relatives had sent years ago. And Tenzin\'s own mother could teach reading, writing, and history.',
'<span class="dialog">"We have teachers,"</span> Tenzin announced at a village meeting, standing on an overturned bucket so everyone could see him. <span class="dialog">"We have books. What we need is a building. And we have something better than money ‚Äî we have each other."</span>',
'The adults exchanged uncertain glances. But the children ‚Äî twenty-three of them, ranging from age five to fourteen ‚Äî began to clap. Their enthusiasm was contagious. One by one, the adults began to nod.',
'Over the next two months, the entire village came together. Farmers donated stones from their fields. Yak herders carried timber from the forest below. Women mixed mortar and laid bricks. Even the youngest children helped by carrying small stones and water buckets. Tenzin organized everything, keeping detailed plans in a notebook and assigning tasks based on each person\'s skills.'
]},
{heading:'Chapter 3: The Storm',paras:[
'The building was almost finished when disaster struck. A massive storm hit the mountains ‚Äî three days of relentless rain, howling wind, and terrifying lightning. The half-built school\'s walls cracked. The roof beams, which hadn\'t been secured yet, blew away down the mountainside. Weeks of work were destroyed in a single night.',
'The next morning, Tenzin stood in the ruins, rain still dripping from his hair, and stared at the damage. The adults shook their heads sadly. <span class="dialog">"It\'s no use,"</span> said one farmer. <span class="dialog">"The mountain doesn\'t want a school."</span>',
'Tenzin felt a lump in his throat, but he swallowed it. He thought of his mother\'s words: knowledge can move mountains. If that was true, then surely it could rebuild one small school.',
'<span class="dialog">"We\'ll build it again,"</span> he said quietly. <span class="dialog">"But this time, we\'ll build it stronger."</span>',
'He spent three days studying the damaged structure, figuring out what went wrong. The walls had cracked because the foundation was too shallow for the mountain\'s rocky soil. The roof had blown away because it wasn\'t properly anchored. Tenzin redesigned everything, using principles from a construction book Mrs. Pema found in her textbook boxes.',
'The village rebuilt. This time, they dug the foundation twice as deep. They anchored the roof with heavy stones and wire. They built the walls thicker. The work was harder and slower, but nobody complained. They had learned from their failure, and the second version was immeasurably better than the first.'
]},
{heading:'Chapter 4: The Bell Rings',paras:[
'On a crisp October morning, with snowcapped peaks glittering in the sunshine and prayer flags fluttering in the breeze, the Tashi Delek Village School opened its doors for the first time. Twenty-three students, scrubbed clean and vibrating with excitement, filed into the single-room building and sat at desks made from reclaimed wood.',
'Tenzin had found an old brass bell at the bottom of a storage trunk. He hung it outside the door. At exactly eight o\'clock in the morning, he pulled the rope, and the bell rang out across the valley ‚Äî clear, bright, and beautiful. It was the first school bell ever heard in Tashi Delek.',
'Some of the parents cried. Mr. Dorje, who hadn\'t taught mathematics in fifteen years, stood at the chalkboard with shaking hands and wrote: 1 + 1 = 2. Then he turned to the children and said, <span class="dialog">"Today, everything begins."</span>',
'Word of the village school spread. A charity organization heard about Tenzin\'s story and donated proper textbooks, solar panels for electricity, and a satellite internet connection. A teacher training program sent additional instructors. The government, embarrassed by a ten-year-old accomplishing what they hadn\'t, began planning roads and bridges to connect remote villages.',
'Three years later, every child in Tashi Delek could read, write, and do mathematics. Several had earned scholarships to schools in Kathmandu. And Tenzin, now thirteen, was working on his next impossible project ‚Äî building a library.',
'<span class="dialog">"Tenzin,"</span> his mother said one evening, watching him sketch plans for bookshelves, <span class="dialog">"what made you believe you could do all this?"</span>',
'Tenzin looked up and smiled. <span class="dialog">"You told me knowledge can move mountains. I just decided to test whether that was true."</span>',
'It was.'
]}
],
questions:[
{q:'Why was there no school in Tashi Delek?',opts:['Children didn\'t want one','It was too remote ‚Äî the nearest school was a 7-hour dangerous walk','The government banned schools','Teachers refused to go there'],ans:1,explain:'The village was so remote (14,000 feet altitude) that the nearest school was a dangerous 7-hour walk away.'},
{q:'How did Tenzin solve the problem of having no teachers?',opts:['He hired teachers from the city','He discovered that village residents already had teaching skills','He taught everything himself','He used only books'],ans:1,explain:'Tenzin found that Mr. Dorje was a retired math teacher, Mrs. Pema had textbooks, and his mother could teach reading and writing.'},
{q:'The word "resourceful" describes someone who:',opts:['Has lots of money','Finds clever ways to solve problems with what\'s available','Is very strong','Gives up easily'],ans:1,explain:'Resourceful means being able to find clever solutions using whatever resources are available, even when they\'re limited.'},
{q:'What happened when the storm destroyed the school?',opts:['Tenzin gave up','Tenzin studied what went wrong and rebuilt it stronger','The village abandoned the project','The government built a new one'],ans:1,explain:'Instead of giving up, Tenzin analyzed the structural failures and redesigned the building to be much stronger.'},
{q:'What is the MAIN THEME?',opts:['Storms are dangerous','Determination and community can overcome impossible obstacles','Schools are not important','Mountains are beautiful'],ans:1,explain:'The story shows how one determined child, working with a supportive community, can achieve what seems impossible.'},
{q:'"Knowledge can move mountains" is an example of:',opts:['A literal statement','A metaphor meaning knowledge has the power to overcome great challenges','A scientific fact','An exaggeration'],ans:1,explain:'This metaphor means that knowledge and education have the power to overcome enormous challenges ‚Äî figuratively "moving mountains."'},
{q:'Why was the second school building better?',opts:['They used different materials','They learned from their mistakes and fixed the design flaws','It was built by professionals','They used more money'],ans:1,explain:'By studying what went wrong (shallow foundation, unanchored roof), they improved the design, making the second building much stronger.'},
{q:'What can you INFER about the government\'s response?',opts:['They were proud','They felt embarrassed that a child accomplished what they hadn\'t','They punished Tenzin','They didn\'t notice'],ans:1,explain:'The text says the government was "embarrassed by a ten-year-old accomplishing what they hadn\'t" and then began building infrastructure.'},
{q:'Mr. Dorje saying "Today, everything begins" shows:',opts:['He was confused','Education was the start of new opportunities for the entire village','He forgot what to teach','He wanted to leave'],ans:1,explain:'His emotional statement captures the significance of the moment ‚Äî education opening doors to an entirely new future for the village.'},
{q:'The story structure follows which pattern?',opts:['Problem ‚Üí Failed attempt ‚Üí Learning ‚Üí Success','Beginning ‚Üí End','Only happy events','Random events'],ans:0,explain:'The story follows a classic narrative arc: identifying the problem, initial attempt, setback (storm), learning from failure, and ultimate success.'}
]},

// ===== STORY 5 =====
{id:5,icon:'üèôÔ∏è',title:'The Code That Changed Everything',genre:'Technology / Friendship',scene:'city',
chapters:[
{heading:'Chapter 1: The App Idea',paras:[
'<span class="em">Zara Williams</span> noticed it every day on her walk to school through downtown Detroit: elderly people struggling to carry groceries, sitting alone on park benches with nobody to talk to, or looking confused at bus schedules they couldn\'t read because the print was too small. Meanwhile, teenagers at her school complained about needing community service hours and having nothing to do.',
'<span class="dialog">"What if there was a way to connect them?"</span> Zara said to her best friend <span class="em">Marcus</span> during lunch. <span class="dialog">"Like, an app where senior citizens could post when they need help, and teens nearby could respond?"</span>',
'Marcus\'s eyes lit up. He was the best programmer in their grade ‚Äî he\'d been coding since he was eight and had already built three simple games. <span class="dialog">"We could totally build that. I\'ll handle the code. You handle the design and the people side."</span>',
'They shook hands across the cafeteria table, and <span class="em">BridgeApp</span> was born ‚Äî on a napkin, with a sketched logo of two hands reaching toward each other across a bridge.'
]},
{heading:'Chapter 2: Building BridgeApp',paras:[
'The next three months were the hardest and most exciting of Zara\'s life. Every day after school, she and Marcus worked in the public library\'s computer lab. Marcus wrote code for hours, building the app\'s framework piece by piece. Zara designed the user interface, making sure it was simple enough for elderly people who had never used smartphones.',
'They ran into problems constantly. The location tracking drained batteries too fast. The text was too small on older phones. The notification system crashed when more than ten people used it simultaneously. Each bug felt like hitting a wall, but they treated every problem as a puzzle to solve.',
'Zara also did something no other app developer had thought of ‚Äî she went to the senior center on Oak Street and actually talked to the people who would use BridgeApp. She sat with them for hours, listening to their needs, their concerns, and their fears about technology.',
'<span class="dialog">"I don\'t trust computers,"</span> said Mrs. Gloria Henderson, a seventy-eight-year-old retired nurse. <span class="dialog">"What if someone pretends to be a helper but really wants to rob me?"</span>',
'It was a valid concern. Zara and Marcus added a verification system: every teen helper needed a parent\'s approval, a school ID, and a background check through the school. Every interaction was logged and reviewed.',
'<span class="dialog">"I also just need someone to talk to sometimes,"</span> Mrs. Henderson added quietly. <span class="dialog">"My children live far away. I go days without having a real conversation."</span>',
'That comment changed BridgeApp\'s design completely. Zara added a "Just Chat" feature ‚Äî where seniors could request a friendly visit, not just practical help.'
]},
{heading:'Chapter 3: Launch Day',paras:[
'On launch day, forty-seven seniors and eighty-two teenagers signed up in the first week. The results were immediate and heartwarming. Teenagers carried groceries, mowed lawns, and helped set up email accounts. But the most popular feature, by far, was "Just Chat."',
'Marcus was paired with Mr. James, a ninety-one-year-old former jazz musician who had fascinating stories about performing in clubs in the 1960s. They met every Wednesday, and Mr. James taught Marcus about music history while Marcus helped him video-call his grandchildren in California.',
'Zara herself was paired with Mrs. Henderson, who turned out to be one of the funniest, wisest people Zara had ever met. Mrs. Henderson told stories about working as a nurse during the Civil Rights era, treating patients who had been injured in protests. In return, Zara taught her to use a tablet, and within a month, Mrs. Henderson was video-calling her daughter every evening.',
'<span class="dialog">"You gave me my family back,"</span> Mrs. Henderson told Zara, tears rolling down her cheeks. <span class="dialog">"I can see my grandchildren\'s faces now. I can watch them grow up. You have no idea what that means."</span>'
]},
{heading:'Chapter 4: Ripple Effects',paras:[
'By the end of the school year, BridgeApp had over five hundred users across Detroit. Local news stations covered the story. The mayor mentioned it in a city council speech. A tech company offered to help Zara and Marcus professionally develop the app and expand it to other cities.',
'But the most meaningful changes weren\'t in the numbers. They were in the stories. A teen named David discovered that Mr. Park, the elderly man he visited weekly, had been an engineer at NASA during the moon landing ‚Äî and Mr. Park\'s stories inspired David to apply to engineering school. A grandmother named Mrs. Osei, who had been severely depressed after her husband died, told the news reporter that her weekly visitor, a girl named Keisha, had <span class="dialog">"saved her life."</span>',
'At the school\'s end-of-year assembly, Zara gave a short speech. <span class="dialog">"People talk about building bridges between generations,"</span> she said. <span class="dialog">"Marcus and I just built a small one. But every bridge starts with one person deciding to reach out. You don\'t need to be a programmer or an inventor. You just need to notice the people around you who need connection. Because loneliness is a problem that technology alone can\'t solve ‚Äî it takes human beings showing up for each other."</span>',
'The audience was silent for a moment. Then the applause started ‚Äî first from the seniors sitting in the front row, invited specially for the event, and then from every student, teacher, and parent in the auditorium. Mrs. Henderson clapped loudest of all.',
'After the assembly, Marcus found Zara in the hallway. <span class="dialog">"You know what the coolest part is?"</span> he said. <span class="dialog">"We started this to help other people. But I think it changed us more than anyone."</span>',
'Zara smiled. He was right. She had learned more about empathy, persistence, listening, and leadership in six months of building BridgeApp than in all her years of school combined. And the best part? They were just getting started.'
]}
],
questions:[
{q:'What problem did Zara observe in her city?',opts:['Too much traffic','Elderly people were isolated and needed help while teens had free time','Schools were closing','Parks were dirty'],ans:1,explain:'Zara noticed elderly people struggling alone while nearby teenagers had time and energy but no way to connect with them.'},
{q:'Why did Zara visit the senior center?',opts:['To sell the app','To understand users\' real needs, concerns, and fears','For a school assignment','To find her grandmother'],ans:1,explain:'Zara wanted to design the app based on real user needs by actually listening to the seniors who would use it.'},
{q:'How did Mrs. Henderson\'s comment change the app?',opts:['They removed the app','They added a "Just Chat" feature for companionship','They made the app more expensive','They added games'],ans:1,explain:'When Mrs. Henderson said she just needed someone to talk to, Zara realized loneliness was as important as practical needs, adding the "Just Chat" feature.'},
{q:'The word "simultaneously" means:',opts:['Slowly','At the same time','One at a time','Never'],ans:1,explain:'Simultaneously means happening at the same time ‚Äî the app crashed when more than ten people used it at once.'},
{q:'What is the MAIN MESSAGE of this story?',opts:['Technology is bad for old people','Real change comes from noticing needs and connecting people','Only programmers can help society','Elderly people don\'t need help'],ans:1,explain:'The story shows that technology is a tool, but the real solution to isolation and loneliness is human beings choosing to connect with each other.'},
{q:'What made BridgeApp different from other apps?',opts:['It was free','It was designed BY listening to elderly users and addressed loneliness, not just tasks','It had better graphics','It was faster'],ans:1,explain:'Unlike typical apps, BridgeApp was designed through direct conversations with seniors and addressed emotional needs (loneliness), not just practical ones.'},
{q:'Marcus saying "it changed us more than anyone" suggests:',opts:['They regretted building it','Helping others also helped them grow as people','The app didn\'t work','They made money'],ans:1,explain:'Marcus realized that the experience of building BridgeApp and connecting with seniors had profoundly changed them as people.'},
{q:'Mrs. Henderson saying "You gave me my family back" shows:',opts:['Her family had moved back to Detroit','Technology helped reconnect her with distant family through video calls','Zara adopted her','Her family was lost'],ans:1,explain:'Learning to use technology allowed Mrs. Henderson to video-call her daughter and see her grandchildren, restoring family connection.'},
{q:'What text structure does the author primarily use?',opts:['Compare and contrast','Chronological order (events over time)','Cause and effect only','Description only'],ans:1,explain:'The story follows a chronological structure: observing the problem, building the app, launching it, and seeing the results unfold over time.'},
{q:'Zara\'s speech says "loneliness is a problem that technology alone can\'t solve" because:',opts:['Technology is useless','Connection requires real human effort and caring, not just an app','She wanted people to delete apps','She was against computers'],ans:1,explain:'While technology can facilitate connections, the actual cure for loneliness is human beings choosing to show up, listen, and care about each other.'}
]}
];

// ===== BUILD MENU =====
function buildGrid(){
  const grid=document.getElementById('storyGrid');
  grid.innerHTML='';
  STORIES.forEach((s,i)=>{
    const read=usedStories.has(s.id);
    const card=document.createElement('div');
    card.className='story-card';
    card.onclick=()=>openStory(i);
    card.innerHTML=`<div class="sc-icon">${s.icon}</div><div class="sc-info"><div class="sc-title">${s.title}</div><div class="sc-desc">${s.genre}</div></div><div class="sc-tag ${read?'read':'new'}">${read?'‚úì Read':'NEW'}</div>`;
    card.style.animationDelay=(i*0.06)+'s';
    grid.appendChild(card);
  });
}

// ===== OPEN STORY =====
function openStory(idx){
  iAC();sfxTap();
  curStory=STORIES[idx];
  usedStories.add(curStory.id);
  score=0;answered=0;correct=0;
  document.getElementById('scTxt').textContent='0';
  document.getElementById('qBadge').textContent='Q 0/10';
  document.getElementById('rTitle').textContent=curStory.title;
  document.getElementById('progFill').style.width='0%';
  show('readerScr');
  renderStory();
  setTimeout(()=>say('Welcome to '+curStory.title+'. Scroll down to read the story, then answer the questions!'),400);
}

function renderStory(){
  const body=document.getElementById('readerBody');
  let html='<div class="story-content">';
  // Scene illustration
  html+=`<div class="ch-scene">${svgScene(curStory.scene)}</div>`;
  // Chapters
  curStory.chapters.forEach((ch,ci)=>{
    html+=`<div class="ch-heading">${ch.heading}</div>`;
    ch.paras.forEach((p,pi)=>{
      html+=`<p class="story-para">${p}</p>`;
      // Add inline scene images between chapters
      if(pi===Math.floor(ch.paras.length/2)){
        const imgs=getInlineEmojis(curStory.scene,ci);
        html+=`<div class="inline-img">${imgs}</div>`;
      }
    });
  });
  // Vocabulary box
  html+=`<div class="vocab-box"><div class="vb-title">üìù Story Vocabulary</div>${getVocab(curStory.id)}</div>`;
  // Questions section
  html+=`</div><div class="q-section"><div class="q-divider">üìù Comprehension Questions</div>`;
  curStory.questions.forEach((q,qi)=>{
    const shuffledOpts=q.opts.map((o,i)=>({text:o,origIdx:i}));
    // Don't shuffle ‚Äî keep consistent with answer index
    html+=`<div class="q-card" style="animation-delay:${qi*0.05}s" id="qc${qi}">
<div class="q-num">Question ${qi+1} of ${curStory.questions.length}</div>
<div class="q-text">${q.q}</div>
<div class="q-opts">${q.opts.map((o,i)=>`<div class="q-opt" onclick="checkAns(${qi},${i})" id="qo${qi}_${i}">${String.fromCharCode(65+i)}) ${o}</div>`).join('')}</div>
<div class="q-explain" id="qex${qi}">üí° ${q.explain}</div>
</div>`;
  });
  html+=`<div id="resultsArea"></div></div>`;
  body.innerHTML=html;
  body.scrollTop=0;
  // Progress tracking on scroll
  body.onscroll=()=>{
    const pct=body.scrollTop/(body.scrollHeight-body.clientHeight)*100;
    document.getElementById('progFill').style.width=Math.min(pct,100)+'%';
  };
}

function getInlineEmojis(scene,chIdx){
  const sets={
    forest:[['üå≤','üê∫','üå≤','üêæ','üå≤'],['‚ùÑÔ∏è','üèîÔ∏è','üê∫','üåô','‚ùÑÔ∏è'],['üå∏','üê∫','üê∫','üê∫','üê∫','üå∏'],['üåÖ','üê∫','üå≤','ü¶Ö','üåÑ']],
    ocean:[['üåä','üê†','üêô','üêö','üåä'],['ü§ø','üìä','üî¨','üìù','üå°Ô∏è'],['üíß','üîç','üß™','‚ú®','üê†'],['üé§','üëè','üåä','üêã','üéì']],
    space:[['üåô','‚≠ê','‚≠ê','‚≠ê','üåô'],['üî≠','üìì','‚≠ê','‚ùì','üåå'],['üì°','üî≠','üåç','üì∞','üéâ'],['üéì','üî≠','‚≠ê','üëµ','üí´']],
    mountain:[['üèîÔ∏è','üè†','üìö','üèîÔ∏è','üèîÔ∏è'],['üö™','üìñ','üßÆ','‚úèÔ∏è','ü§ù'],['‚õàÔ∏è','üíî','üí™','üìê','üî®'],['üîî','üìö','üéì','‚≠ê','üèîÔ∏è']],
    city:[['üèôÔ∏è','üëµ','üßë','üì±','üí°'],['üíª','üë¥','üìã','üîß','‚òï'],['üöÄ','üí¨','‚ù§Ô∏è','üì±','üëè'],['üì∞','üåâ','ü§ù','üíù','üé§']],
    farm:[['üåæ','üêÑ','üêî','üöú','üåª'],['üå±','üíß','‚òÄÔ∏è','üêù','üåæ'],['üåßÔ∏è','üòü','üí™','üåà','üåª'],['üéÉ','üèÜ','üë®‚Äçüë©‚Äçüëß‚Äçüë¶','‚ù§Ô∏è','üåÖ']],
    desert:[['üèúÔ∏è','üê™','‚òÄÔ∏è','üåµ','ü¶é'],['üíß','üîç','üó∫Ô∏è','‚≠ê','üèúÔ∏è'],['üåÖ','ü§ù','üí™','üê™','üèîÔ∏è'],['üåü','üìñ','‚ù§Ô∏è','üèúÔ∏è','‚ú®']],
    arctic:[['üßä','üêß','‚ùÑÔ∏è','üåä','üèîÔ∏è'],['üî¨','üìù','üå°Ô∏è','‚ùÑÔ∏è','üêß'],['‚õàÔ∏è','üí™','ü§ù','üè†','‚ùÑÔ∏è'],['‚òÄÔ∏è','üêß','üåä','üéì','‚ú®']]
  };
  const s=sets[scene]||sets.forest;
  return (s[chIdx%s.length]||s[0]).join(' ');
}

function getVocab(id){
  const vocabs={
    1:'<b>Haunting</b> ‚Äî beautiful but eerie and unforgettable ‚Ä¢ <b>Malnourished</b> ‚Äî lacking proper nutrition ‚Ä¢ <b>Trophic cascade</b> ‚Äî when changes at the top of the food chain affect the whole ecosystem ‚Ä¢ <b>Antiseptic</b> ‚Äî a substance that prevents infection',
    2:'<b>Coral bleaching</b> ‚Äî when coral loses its color due to stress ‚Ä¢ <b>Microhabitat</b> ‚Äî a small area with unique conditions ‚Ä¢ <b>Salinity</b> ‚Äî the amount of salt in water ‚Ä¢ <b>Polyps</b> ‚Äî tiny animals that build coral reefs',
    3:'<b>Exoplanet</b> ‚Äî a planet orbiting a star outside our solar system ‚Ä¢ <b>Eclipse</b> ‚Äî when one object blocks light from another ‚Ä¢ <b>Constellation</b> ‚Äî a group of stars forming a pattern ‚Ä¢ <b>Astrophysics</b> ‚Äî the study of how stars and planets work',
    4:'<b>Resourceful</b> ‚Äî finding clever ways to solve problems ‚Ä¢ <b>Monsoon</b> ‚Äî a seasonal period of heavy rain ‚Ä¢ <b>Foundation</b> ‚Äî the base on which a building is constructed ‚Ä¢ <b>Perseverance</b> ‚Äî continuing despite difficulty',
    5:'<b>User interface</b> ‚Äî how an app looks and feels to use ‚Ä¢ <b>Verification</b> ‚Äî confirming something is true or genuine ‚Ä¢ <b>Simultaneously</b> ‚Äî at the same time ‚Ä¢ <b>Empathy</b> ‚Äî understanding others\' feelings'
  };
  return vocabs[id]||'';
}

// ===== ANSWER CHECKING =====
function checkAns(qIdx,optIdx){
  const q=curStory.questions[qIdx];
  const el=document.getElementById(`qo${qIdx}_${optIdx}`);
  if(el.classList.contains('correct')||el.classList.contains('locked'))return;
  if(optIdx===q.ans){
    el.classList.add('correct');
    sfxOk();
    correct++;score+=10;
    document.getElementById('scTxt').textContent=score;
    // Lock all other options
    q.opts.forEach((_,i)=>{if(i!==optIdx)document.getElementById(`qo${qIdx}_${i}`).classList.add('locked')});
    // Show explanation
    document.getElementById(`qex${qIdx}`).classList.add('show');
    answered++;
    document.getElementById('qBadge').textContent=`Q ${answered}/10`;
    if(answered>=curStory.questions.length){setTimeout(showResults,600)}
  }else{
    el.classList.add('wrong');sfxNo();
    setTimeout(()=>el.classList.remove('wrong'),600);
  }
}

function showResults(){
  sfxWin();conf();
  const pct=Math.round(correct/curStory.questions.length*100);
  const emoji=pct>=90?'üèÜ':pct>=70?'üåü':pct>=50?'üëç':'üìö';
  const msg=pct>=90?'Outstanding Scholar!':pct>=70?'Great Reader!':pct>=50?'Good Effort!':'Keep Practicing!';
  // Get a different story for replay
  const otherStories=STORIES.filter(s=>s.id!==curStory.id);
  const nextStory=otherStories[R(otherStories.length)];
  const nextIdx=STORIES.indexOf(nextStory);
  
  document.getElementById('resultsArea').innerHTML=`<div class="results">
<div class="res-emoji">${emoji}</div>
<div class="res-title">${msg}</div>
<div class="res-score">${correct}/${curStory.questions.length} correct ‚Äî ${score} points!</div>
<div class="res-sub">${pct}% accuracy</div>
<div class="res-btns">
<button class="rbtn rbtn-home" onclick="goMenu()">üè† Home</button>
<button class="rbtn rbtn-replay" onclick="openStory(${nextIdx})">üîÑ New Story</button>
</div>
</div>`;
  document.getElementById('resultsArea').scrollIntoView({behavior:'smooth'});
}

function conf(){const c=['#fdcb6e','#55efc4','#fab1a0','#a29bfe','#f1c40f','#e74c3c','#74b9ff'];
for(let i=0;i<40;i++){const p=document.createElement('div');p.className='conf';p.style.left=Math.random()*100+'vw';p.style.background=c[R(7)];p.style.animationDelay=Math.random()*.5+'s';p.style.animationDuration=(1.5+Math.random()*1.5)+'s';p.style.width=(6+Math.random()*8)+'px';p.style.height=(6+Math.random()*8)+'px';p.style.borderRadius=Math.random()>.5?'50%':'2px';document.body.appendChild(p);setTimeout(()=>p.remove(),3000)}}

// Init
buildGrid();
setTimeout(()=>say('Welcome to Reading Adventure! Choose a story to begin!'),500);
</script>
</body>
</html>
